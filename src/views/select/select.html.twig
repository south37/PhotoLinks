{% extends 'layout.html.twig' %}

{% block header %}
    <link rel="stylesheet" href="{{ asset('/js/plugin/sidr/stylesheets/jquery.sidr.dark.css') }}">
{% endblock %}

{% block contents %}
    {% include 'error.html.twig' with {errors: errors} %}
    
    <a id="simple-menu" href="#sidr" class="btn">toggle bar</a>
    <div id="sidr">
        <ul>
            <li class="active"><a href="#">hoge</a></li>
            <li><a href="#">var</a></li>
            <li><a href="#">spam</a></li>
        </ul>
    </div>

    {% for depth, frames_row in frame_rows %}
        <div class="row">
            <!--left_img_frame-->
            <div class="span2 offset1 text-center">
                <img src="/img/assets/searchIcon.png" alt="no_source" width="150" height="150" />
            </div>
       
            <!--main frames-->
            <div class="span6 text-center">
                {% for parent_id, frames in frames_row %}
                    <div class="frames" style="display:none" data-depth="{{ depth }}" id="{{ parent_id }}">
                        {% for frame in frames %}
                            {% if frame['src'] != ''%}
                                <img src="{{ frame['src'] }}" alt="plus1" value="{{ frame['id'] }}" width="100" height="100" />
                            {% endif %}
                        {% endfor %}
                        
                        <!--hidden param from here-->
                        <form action="{{ urlFor('add_frame_from_select') }}" method="get">
                            <input type="hidden" name="parent-id" value="" />
                            {% if (depth != 0) %}
                                <input type="hidden" name="theme-id"  value="{{ theme_id }}" />
                                <input type="image" src="/img/public_img/plus.png" alt="コマを追加" width="100" height="100">
                            {% endif %}
                        </form>
                        <!--hidden param to here-->
                    </div>
                {% endfor %}
            </div>

            <!--right_plus_img-->
            <div class="span2 text-center">
                <img src="/img/assets/plusIcon.png" alt="no_source" width="100" height="100" />
            </div>
       

        </div>
    {% endfor %}
            
           <form action="{{ urlFor('story_view_frames') }}" method="get" id="story-fm">
                <input type="text"   name="selected-frames-id" value="" />
                <input type="hidden" name="theme-id"  value="{{ theme_id }}" />
                <button id="story-view-btn" type="submit" class="btn btn-primary">ストーリーを見る</button>
           </form>

        </div>
    </div>
{% endblock %}

{% block javascript %}
<script src="{{ asset('/js/select.js') }}"></script>
<script type="text/javascript">

$(document).ready(function(){
    // sidr
    $('#simple-menu').sidr({
        side:'right',
        body: null
    });

    // slider
    $('.slider-row').bxSlider({
    auto: true,
    pause:  5000,
    speed: 1000,
    pager: false,
    slideWidth: 600,
    minSlides: 3, //一画面に表示する数
    maxSlides: 4,
    moveSlides: 1, //移動時にずれる数
    prevText: '<',
    nextText: '>'
    });
});

</script>
    
{% endblock %}
