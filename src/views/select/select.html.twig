{% extends 'layout.html.twig' %}

{% block header %}
    <link rel="stylesheet" href="{{ asset('/js/plugin/sidr/stylesheets/jquery.sidr.dark.css') }}">
{% endblock %}

{% block contents %}
    {% include 'error.html.twig' with {errors: errors} %}
    
    <a id="simple-menu" href="#sidr" class="btn">toggle bar</a>
    <div id="sidr">
        <ul>
            <li class="active"><a href="#">hoge</a></li>
            <li><a href="#">var</a></li>
            <li><a href="#">spam</a></li>
        </ul>
    </div>

    {% for depth, frames_row in frame_rows %}
        <div class="row frames-field"  data-depth="{{ depth }}" id="field-{{depth}}">
        
            <!--left_img_frame-->
            <div class="span3 text-center">
                <img class="preview-frame" src="/img/assets/searchIcon.png" alt="no_source" width="150" height="150" id="preview-{{depth}}" />
            </div>
       
            <!--main frames-->
            <div class="span6 text-center">
                {% for parent_id, frames in frames_row %}
                    <div class="frames" data-parent="{{parent_id}}" id="childlen-of-{{ parent_id }}">
                        <ul class="slider-row">
                        {% for frame in frames %}
                            {% if frame['src'] != ''%}
                                <li><img class="frame" src="{{ frame['src'] }}" alt="not found" value="{{ frame['id'] }}" width="100" height="100" /></li>
                            {% endif %}
                        {% endfor %}
                        </ul>
                    </div>
                {% endfor %}
            </div>

            <!--right_plus_img-->
            <div class="span2 text-center">
               <!--hidden param from here-->
               <form action="{{ urlFor('add_frame_from_select') }}" method="get">
                   <input type="hidden" name="parent-id" value="" />
                   {% if (depth != 0) %}
                       <input type="hidden" name="theme-id"  value="{{ theme_id }}" />
                       <input type="image" src="/img/assets/plusIcon.png" alt="コマを追加" width="50" height="50">
                   {% endif %}
               </form>
               <!--hidden param to here-->
            </div>

        </div>
    {% endfor %}
            
           <form action="{{ urlFor('story_view_frames') }}" method="get" id="story-fm">
                <input type="text"   name="selected-frames-id" value="" />
                <input type="hidden" name="theme-id"  value="{{ theme_id }}" />
                <button id="story-view-btn" type="submit" class="btn btn-primary">ストーリーを見る</button>
           </form>

{% endblock %}

{% block javascript %}
<script src="{{ asset('/js/select.js') }}"></script>
<script type="text/javascript">

$(document).ready(function(){
    // sidr
    $('#simple-menu').sidr({
        side:'right',
        body: null
    });

    // slider
    $('.slider-row').bxSlider({
    auto: false,
    pause:  5000,
    speed: 1000,
    pager: false,
    slideWidth: 600,
    minSlides: 3, //一画面に表示する数
    maxSlides: 4,
    moveSlides: 1, //移動時にずれる数
    prevText: '<',
    nextText: '>'
    });
});

</script>
    
{% endblock %}
